"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function Logger(){return this instanceof Logger?(Logger.super_.call(this),this.level=2,this.setStream(process.stdout),this):new Logger}var _defineProperties=require("babel-runtime/core-js/object/define-properties"),_defineProperties2=_interopRequireDefault(_defineProperties),Colours=require("colours"),TypeOf=require("typeof"),assert=require("assert"),util=require("util"),path=require("path"),readline=require("readline");util.inherits(Logger,Object),(0,_defineProperties2["default"])(Logger.prototype,{LEVEL_SILENT:{value:0},LEVEL_ERROR:{value:1},LEVEL_WARNING:{value:2},LEVEL_INFO:{value:3},LEVEL_DEBUG:{value:4},LEVEL_MAX:{value:5},setLevel:{value:function(e){var t=e;TypeOf.isString(t)&&(t=this["LEVEL_"+e.toUpperCase()]),assert(TypeOf.isNumber(t)&&t>=0&&t<=this.LEVEL_MAX,"Unknown logger level!"),this.level=t}},getLevel:{value:function(){return this.level}},setStream:{value:function(e){return this.stream=e,process.browser?(Colours.disable(),this.output=this.outputBrowser):Colours.isValid(this.stream)?(Colours.enable(),this.output=this.outputColour):(Colours.disable(),void(this.output=this.outputPlaintext))}},trace:{value:function(){var e=[/at\s+(.*)\s+\((.*):(\d*):(\d*)\)/i,/at\s+()(.*):(\d*):(\d*)/i];return function(t){var r=(new Error).stack||"",i=r.split("\n").slice(t||4),o=e[0].exec(i[0])||e[1].exec(i[0])||{};return{method:o[1],path:o[2],line:o[3],"char":o[4],file:path.basename(o[2],".js"),trace:r}}}()},timestamp:{get:function(){return"["+(new Date).toTimeString().split(/[\s]+/)[0]+"]"}},stringify:{value:function(){return function(e){return TypeOf.isString(e)?e:util.inspect(e,{depth:null,colors:Colours.isValid(this.stream)})}}()},outputBrowser:{value:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t.length,o=void 0;for(o=0;o<i;++o)console.log(t[o])}},outputPlaintext:{value:function(){var e=require("os").EOL;return function(){for(var t=arguments.length,r=Array(t),i=0;i<t;i++)r[i]=arguments[i];var o=r.length,s=void 0;for(s=0;s<o;++s)this.stream.write(""+r[s]+e)}}()},outputColour:{value:function(){var e=require("os").EOL+"[49m[0m";return function(){for(var t=arguments.length,r=Array(t),i=0;i<t;i++)r[i]=arguments[i];var o=r.length,s=void 0,n=void 0;for(s=0;s<o;++s)n=r[s],this.stream.write(n),n.visibleLength!==process.stdout.columns&&this.stream.write(e)}}()},to:{value:function(e,t){readline.cursorTo(this.stream,e,t)}},move:{value:function(e,t){readline.moveCursor(this.stream,e,t)}},clear:{value:function(){this.stream.isTTY&&this.output("[J")}},skip:{value:function(e){if(!(this.level<=this.LEVEL_INFO))for(var t=0;t<e;++t)this.output("")}},print:{value:function(e,t){if(!(e>this.level)){for(var r=this.trace(),i=("["+r.file+":"+r.line+"]").grey,o=arguments.length,s=Array(o>2?o-2:0),n=2;n<o;n++)s[n-2]=arguments[n];var u=s.map(this.stringify,this).join("");this.output(this.timestamp.grey+" "+i+" "+t+" "+u)}}},debug:{value:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];this.print.apply(this,[this.LEVEL_DEBUG,"[d]".blue].concat(t))}},info:{value:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];this.print.apply(this,[this.LEVEL_INFO,"[i]".grey].concat(t))}},warn:{value:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];this.print.apply(this,[this.LEVEL_WARNING,"[w]".yellow].concat(t))}},error:{value:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];this.print.apply(this,[this.LEVEL_ERROR,"[!]".red].concat(t))}},fatal:{value:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];this.print.apply(this,[this.LEVEL_ERROR,"[x]".red].concat(t)),process.exit(-1)}},ok:{value:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];this.print.apply(this,[this.LEVEL_INFO,"[âœ“]".green].concat(t))}}}),module.exports=global.logger=new Logger;